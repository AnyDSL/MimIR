extern vectorized_loop(int, int, fn(fn() -> int) -> void) -> void;
extern array(int) -> [float];

fn main() -> [float] {
    let width   = 1024;
    let mut arr = array(width);
    let mut out = array(width);

    vectorized_loop(4, width, |x : fn() -> int| -> void {
        out[x()] = arr[x()];
    });

    return out;
}
