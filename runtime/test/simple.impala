extern all_on_gpu([float], fn(int, int, int) -> void) -> int;
extern array(int) -> [float];

fn main() -> [float] {
    let width   = 1024;
    let arr     = array(width);
    let out     = array(width);

    all_on_gpu(out, |x : int, y : int, z : int| -> void {
        out[x] = arr[x];
    });

    return out;
}
