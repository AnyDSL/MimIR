// RUN: rm -f %t.ll ; \
// RUN: %thorin -d autodiff %s --output-ll %t.ll -o - | FileCheck %s

.import autodiff;
.import core;
.import debug;
.import direct;
.import mem;
.lam Uf_537924_488187 _488205: «2:.Nat; (.Idx 4294967296)» → ★ = {
    [(.Idx 4294967296), .Cn [(.Idx 4294967296), .Cn «2:.Nat; (.Idx 4294967296)»]]
};
.con inner_mul_deriv_cps_537991_488248 __538006_488256::[__538032_488270::[_488274: (.Idx 4294967296), _488278: (.Idx 4294967296)], ret_538008_488258: .Cn [(.Idx 4294967296), .Cn [(.Idx 4294967296), .Cn «2:.Nat; (.Idx 4294967296)»]]] = {
    .con ret_538008_488254 _488259: [(.Idx 4294967296), .Cn [(.Idx 4294967296), .Cn «2:.Nat; (.Idx 4294967296)»]] = {
        ret_538008_488258 _488259
    };
    .con mul_pb_538056_488291 __538068_488309::[s_538085_488331: (.Idx 4294967296), pb_ret_538070_488311: .Cn «2:.Nat; (.Idx 4294967296)»] = {
        .con pb_ret_538070_488302 _488312: «2:.Nat; (.Idx 4294967296)» = {
            pb_ret_538070_488311 _488312
        };
        .let _488336: (.Idx 4294967296) = %core.wrap.mul 4294967296:.Nat 0:.Nat (__538032_488270#1:(.Idx 2), s_538085_488331);
        .let _488349: (.Idx 4294967296) = %core.wrap.mul 4294967296:.Nat 0:.Nat (__538032_488270#0:(.Idx 2), s_538085_488331);
        pb_ret_538070_488302 (_488336, _488349)
    };
    .let _488281: (.Idx 4294967296) = %core.wrap.mul 4294967296:.Nat 0:.Nat __538032_488270;
    ret_538008_488254 (_488281, mul_pb_538056_488291)
};
.lam Uf_538234_488450 _488468: (.Idx 4294967296) → ★ = {
    (.Idx 4294967296)
};
.con zero_pb_538282_488505 _538284_488516::[(.Idx 4294967296), _538286_488518: .Cn (.Idx 4294967296)] = {
    .con _538286_488514 _488519: (.Idx 4294967296) = {
        _538286_488518 _488519
    };
    _538286_488514 0:(.Idx 4294967296)
};
.lam Uf_538299_488558 _488576: (.Idx 4294967296) → ★ = {
    (.Idx 4294967296)
};
.con id_pb_538347_488614 _538349_488631::[s_538355_488643: (.Idx 4294967296), _538351_488633: .Cn (.Idx 4294967296)] = {
    .con _538351_488624 _488634: (.Idx 4294967296) = {
        _538351_488633 _488634
    };
    _538351_488624 s_538355_488643
};
.con .extern main __538139_488027::[mem_538158_488043: %mem.M, (.Idx 4294967296), %mem.Ptr (%mem.Ptr ((.Idx 256), 0:.Nat), 0:.Nat), return_538143_488031: .Cn [%mem.M, (.Idx 4294967296)]] = {
    .con return_538143_488022 _488032: [%mem.M, (.Idx 4294967296)] = {
        return_538143_488031 _488032
    };
    .let _488369: [(.Idx 4294967296), .Cn [(.Idx 4294967296), .Cn «2:.Nat; (.Idx 4294967296)»]] = %direct.cps2ds_dep («2:.Nat; (.Idx 4294967296)», Uf_537924_488187) inner_mul_deriv_cps_537991_488248 (2:(.Idx 4294967296), 42:(.Idx 4294967296));
    .let _488382: (.Idx 4294967296) = %core.wrap.mul 4294967296:.Nat 0:.Nat (100:(.Idx 4294967296), _488369#0:(.Idx 2));
    .let _488524: (.Idx 4294967296) = %direct.cps2ds_dep ((.Idx 4294967296), Uf_538234_488450) zero_pb_538282_488505 42:(.Idx 4294967296);
    .let _488646: (.Idx 4294967296) = %direct.cps2ds_dep ((.Idx 4294967296), Uf_538299_488558) id_pb_538347_488614 2:(.Idx 4294967296);
    .let _488651: (.Idx 4294967296) = %core.wrap.add 4294967296:.Nat 0:.Nat (_488524, _488646);
    .let _488656: (.Idx 4294967296) = %core.wrap.add 4294967296:.Nat 0:.Nat (_488382, _488651);
    return_538143_488022 (mem_538158_488043, _488656)
};

// .con .extern main __538139_488027_484299::[mem_538158_488043_484316: %mem.M, (.Idx 4294967296), %mem.Ptr (%mem.Ptr ((.Idx 256), 0:.Nat), 0:.Nat), return_538143_488031_484303: .Cn [%mem.M, (.Idx 4294967296)]] = {
//     .con return_538143_488031_484294 _484304: [%mem.M, (.Idx 4294967296)] = {
//         return_538143_488031_484303 _484304
//     };
//     return_538143_488031_484294 (mem_538158_488043_484316, 8402:(.Idx 4294967296))
// };
