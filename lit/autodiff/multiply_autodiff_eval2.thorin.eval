// RUN: rm -f %t.ll ; \
// RUN: %thorin -d autodiff %s --output-ll %t.ll -o - | FileCheck %s

.import autodiff;
.import core;
.import debug;
.import direct;
.import mem;
.lam Uf_537924_488187 _488205: «2; (%core.I32)» → ★ = {
    [(%core.I32), .Cn [(%core.I32), .Cn «2; (%core.I32)»]]
};
.con inner_mul_deriv_cps_537991_488248 __538006_488256::[__538032_488270::[_488274: (%core.I32), _488278: (%core.I32)], ret_538008_488258: .Cn [(%core.I32), .Cn [(%core.I32), .Cn «2; (%core.I32)»]]] = {
    .con ret_538008_488254 _488259: [(%core.I32), .Cn [(%core.I32), .Cn «2; (%core.I32)»]] = {
        ret_538008_488258 _488259
    };
    .con mul_pb_538056_488291 __538068_488309::[s_538085_488331: (%core.I32), pb_ret_538070_488311: .Cn «2; (%core.I32)»] = {
        .con pb_ret_538070_488302 _488312: «2; (%core.I32)» = {
            pb_ret_538070_488311 _488312
        };
        .let _488336: (%core.I32) = %core.wrap.mul 0 (__538032_488270#1:(.Idx 2), s_538085_488331);
        .let _488349: (%core.I32) = %core.wrap.mul 0 (__538032_488270#0:(.Idx 2), s_538085_488331);
        pb_ret_538070_488302 (_488336, _488349)
    };
    .let _488281: (%core.I32) = %core.wrap.mul 0 __538032_488270;
    ret_538008_488254 (_488281, mul_pb_538056_488291)
};
.lam Uf_538234_488450 _488468: (%core.I32) → ★ = {
    (%core.I32)
};
.con zero_pb_538282_488505 _538284_488516::[(%core.I32), _538286_488518: .Cn (%core.I32)] = {
    .con _538286_488514 _488519: (%core.I32) = {
        _538286_488518 _488519
    };
    _538286_488514 0:(%core.I32)
};
.lam Uf_538299_488558 _488576: (%core.I32) → ★ = {
    (%core.I32)
};
.con id_pb_538347_488614 _538349_488631::[s_538355_488643: (%core.I32), _538351_488633: .Cn (%core.I32)] = {
    .con _538351_488624 _488634: (%core.I32) = {
        _538351_488633 _488634
    };
    _538351_488624 s_538355_488643
};
.con .extern main __538139_488027::[mem_538158_488043: %mem.M, (%core.I32), %mem.Ptr (%mem.Ptr ((%core.I8), 0), 0), return_538143_488031: .Cn [%mem.M, (%core.I32)]] = {
    .con return_538143_488022 _488032: [%mem.M, (%core.I32)] = {
        return_538143_488031 _488032
    };
    .let _488369: [(%core.I32), .Cn [(%core.I32), .Cn «2; (%core.I32)»]] = %direct.cps2ds_dep («2; (%core.I32)», Uf_537924_488187) inner_mul_deriv_cps_537991_488248 (2:(%core.I32), 42:(%core.I32));
    .let _488382: (%core.I32) = %core.wrap.mul 0 (100:(%core.I32), _488369#0:(.Idx 2));
    .let _488524: (%core.I32) = %direct.cps2ds_dep ((%core.I32), Uf_538234_488450) zero_pb_538282_488505 42:(%core.I32);
    .let _488646: (%core.I32) = %direct.cps2ds_dep ((%core.I32), Uf_538299_488558) id_pb_538347_488614 2:(%core.I32);
    .let _488651: (%core.I32) = %core.wrap.add 0 (_488524, _488646);
    .let _488656: (%core.I32) = %core.wrap.add 0 (_488382, _488651);
    return_538143_488022 (mem_538158_488043, _488656)
};

// .con .extern main __538139_488027_484299::[mem_538158_488043_484316: %mem.M, (.Idx 4294967296), %mem.Ptr (%mem.Ptr ((.Idx 256), 0), 0), return_538143_488031_484303: .Cn [%mem.M, (.Idx 4294967296)]] = {
//     .con return_538143_488031_484294 _484304: [%mem.M, (.Idx 4294967296)] = {
//         return_538143_488031_484303 _484304
//     };
//     return_538143_488031_484294 (mem_538158_488043_484316, 8402:(.Idx 4294967296))
// };
