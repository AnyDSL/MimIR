// RUN: rm -f %t.ll
// RUN: %mim %s --output-ll %t.ll
// RUN: clang %t.ll -c -o %t -Wno-override-module

plugin core;
plugin vec;

fun foo{n:Nat} (A: «n; Nat», B:«n; Nat»):  «n; Nat» = 
    let C = %vec.zip %core.nat.sub (A, B);
    let D = %vec.zip %core.nat.sub (C, ‹n; 1›);
    return D;

fun extern bar(): «4; Nat» =
    let A = (1, 2, 3, 4);
    let B = (1, 2, 3, 4);
    ret C = foo @4 $ (A, B);
    ret D = foo @4 $ (A, B);
    return D;

