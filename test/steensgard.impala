fn main(i : int, ret : fn(int)) {
    fn branch(cond : bool, t : fn(), f : fn()) {
        (cond ? (t) : f)();
    }

    fn switch(i : int, a : fn(), b : fn(), c : fn()) {
        if (i == 0)
            a();
        else if (i == 1)
            b();
        else
            c();
    }

    fn b() { d(); }
    fn c() { e(); }
    fn d() { switch(i, b, e, f); }
    fn e() { switch(i, d, c, f); }
    fn f() { ret(23); }

    branch(i == 0, b, c);
}
