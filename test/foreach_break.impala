/*
foreach with a break
expected result: 15
*/
fn count(n : int, yield : fn(int, fn()), ret : fn()) {
    fn loop(i : int) {
        if (i < n)
            yield(i, || { loop(i+1); });
        else
            ret();
    }
    loop(0);
}

fn main() -> int {
    b : int = 0;
    foreach (x : int  <- count(10)) {
        b += x;
        if (b > 10)
            break;
    }
    return b;
}
